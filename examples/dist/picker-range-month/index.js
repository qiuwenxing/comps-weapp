let animationShade=null,animationBody=null;Component({externalClasses:["i-class"],properties:{minYear:{type:Number,value:1900},maxYear:{type:Number,value:2100},errorMessage:{type:String,value:"开始时间不能大于结束时间"},value:{type:Array,value:[],observer(t){console.log(t),t&&4===t.length&&this.setValue(t[0],t[1],t[2],t[3])}}},data:{display:!1,years:[],months:[],val:[],result:{start:{year:null,month:null},end:{year:null,month:null}},error:!1,origin:null,animationDataShade:null,animationDataBody:null,isAnimation:!1},methods:{onChange({detail:t}){t=t.value,t=this.compute(t);this.setData({result:t}),this.validate(t)},confirm(){var t=this.data["result"];this.validate(t)?(this.setData({origin:null}),this.hide(),this.triggerEvent("change",{value:t})):wx.vibrateLong()},hide(){let{isAnimation:t,origin:a,val:e,result:i,display:n}=this.data;var s,r;n&&!t&&(a&&(e=a.val,i=a.result),s=animationShade.opacity(0).step().export(),r=animationBody.translateY("100%").step().export(),this.setData({isAnimation:!0,val:e,result:i,animationDataShade:s,animationDataBody:r}),setTimeout(()=>{this.setData({display:!1})},400),setTimeout(()=>{this.setData({isAnimation:!1})},500))},show(){var{isAnimation:t,val:i,result:n,display:a}=this.data;if(!a&&!t){let t={val:i,result:n},a=animationShade.opacity(1).step().export(),e=animationBody.translateY("0").step().export();this.setData({isAnimation:!0,display:!0}),setTimeout(()=>{this.setData({origin:t,animationDataShade:a,animationDataBody:e})},100),setTimeout(()=>{this.setData({isAnimation:!1})},500)}},compute(t){var a;return 5<=t.length?(a=this.data["minYear"],{start:{year:t[0]+a,month:t[1]+1},end:{year:t[3]+a,month:t[4]+1}}):null},validate(t){var a=new Date(t.start.year,t.start.month),t=new Date(t.end.year,t.end.month);let e=!1;return a.getTime()>t.getTime()&&(e=!0),this.setData({error:e}),!e},noTouch(){},setValue(t,a,e,i){var n=this.data["minYear"],t=[t-n,a,0,e-n,i],a=this.compute(t);this.setData({val:t,result:a})}},ready(){var t=new Date,a=t.getFullYear(),t=t.getMonth(),{minYear:e,maxYear:i,years:n,months:s,value:r}=this.data;for(let t=e;t<i;t++)n.push(t);for(let t=1;t<=12;t++)s.push(t);r&&4==r.length||this.setValue(a,t,a,t),this.setData({years:n,months:s})},created(){animationShade=wx.createAnimation({duration:500,timingFunction:"ease",transformOrigin:"50% 50%"}),animationBody=wx.createAnimation({duration:300,timingFunction:"ease",transformOrigin:"50% 50%"})}});